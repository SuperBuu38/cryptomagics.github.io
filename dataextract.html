<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Data</title>
</head>
<body>

<table border="1" id="data-table">
  <thead>
    <tr>
      <th>Template ID</th>
      <th>Name</th>
      <th>Team</th>
      <th>Position</th>
      <th>Depth</th>
      <th>Timestamp</th>
      <th>Game</th>
      <th>Day</th>
      <th>Cost</th>
      <th>Status Injury</th>
    </tr>
  </thead>
  <tbody id="data-body">
    <!-- Data will be inserted here -->
  </tbody>
</table>

<script>
  // Fonction pour effectuer la requête AJAX
  function fetchData() {
    var url = "https://bask-api-main-420f15f4aab2.herokuapp.com/api/v1/lineup/format/json";

    var xhr = new XMLHttpRequest();
    xhr.open("GET", url, true);

    xhr.onload = function () {
      if (xhr.status === 200) {
        var data = JSON.parse(xhr.responseText);
        updateTable(data);
      }
    };

    xhr.send();
  }

  // Fonction pour mettre à jour le tableau HTML avec les données
  function updateTable(data) {
    var tableBody = document.getElementById("data-body");

    // Effacer le contenu actuel du tableau
    tableBody.innerHTML = "";

    // Ajouter les nouvelles données
    data.forEach(function (entry) {
      var row = document.createElement("tr");
      row.innerHTML = `
        <td>${entry.template_id}</td>
        <td>${entry.name}</td>
        <td>${entry.team}</td>
        <td>${entry.position}</td>
        <td>${entry.depth}</td>
        <td>${entry.timestamp}</td>
        <td>${entry.game}</td>
        <td>${entry.day}</td>
        <td>${entry.cost}</td>
        <td>${entry.status_injury}</td>
      `;
      tableBody.appendChild(row);
    });
  }

  // Appeler la fonction fetchData au chargement de la page
  window.onload = fetchData;
</script>

</body>
</html>
